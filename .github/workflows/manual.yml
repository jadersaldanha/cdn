name: Android (Maestro Cloud)

on: [push, pull_request]


jobs:
  run_android_e2e:
    timeout-minutes: 45
    runs-on: ubuntu-latest

    strategy:
      fail-fast: false
      max-parallel: 1
      matrix:
        api-level: [33]
        # ^^^ from: https://cloud.mobile.dev/reference/device-configuration#android

    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 1

      - uses: mobile-dev-inc/action-maestro-cloud@v1
        with:
          api-key: ${{ secrets.MAESTRO_CLOUD_API_KEY }}
          workspace: android/
          app-binary-id: 70eabbcdf6d62331d9cb2088339c8145d92e2ee4
          android-api-level: ${{ matrix.api-level }}